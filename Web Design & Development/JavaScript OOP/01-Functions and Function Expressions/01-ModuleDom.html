<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Functions and Function Expressions: 1</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link href="../css/style.css" rel="stylesheet" type="text/css" />
<link href="../highlight/styles/default.css" rel="stylesheet"
	type="text/css" />
<script type="text/javascript" src="../highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
	<div class="content">
		<div class="description">
			<span>Description:</span> 1. Create a module for working with DOM. The module should have the following functionality
			<ul>
				<li>Add DOM element to parent element given by selector</li>
				<li>Remove element from the DOM by given selector</li>
				<li>Attach event to given selector by given event type and event hander</li>
				<li>Add elements to buffer, which appends them to the DOM when their count for some selector becomes 100
					<ul>
						<li>The buffer contains elements for each selector it gets</li>
					</ul>
				</li>
				<li>Get elements by CSS selector</li>
				<li>The module should reveal only the methods</li>
			</ul>
			<div>
			<h3>Example Code to run module.</h3>
<pre>var domModule = â€¦
var div = document.createElement("div");
//appends div to #wrapper
domModule.appendChild(div,"#wrapper");
//removes li:first-child from ul
domModule.removeChild("ul","li:first-child");
//add handler to each a element with class button
domModule.addHandler("a.button", 'click',
function(){alert("Clicked")});
domModule.appendToBuffer("container", div.cloneNode(true));
domModule.appendToBuffer("#main-nav ul", navItem);
</pre>
			</div>
		</div>
		
		<div class="btnSend" style="display: inline-block;">
			<a href="#" onclick="addElementToParrent()">Add DOM element</a>
		</div>
        <div class="btnSend" style="display: inline-block;">
            <a href="#" onclick="removeElementFromParrent()">Remove element</a>
        </div>
        <div class="btnSend" style="display: inline-block;">
            <a href="#" onclick="startHandler()">Attach event</a>
        </div>
        <div class="btnSend" style="display: inline-block;">
            <a href="#" onclick="startBuferingElementByTen()">Add 35 elements to buffer</a>
        </div>
         <div class="btnSend" style="display: inline-block;">
            <a href="#" onclick="getElementsBySelector()">Get #wraper elements</a>
        </div>
        
		<h3>Wrapper Place... </h3>
		<div id="wrapper"></div>
		<div class="consoleTitle">Console: </div>
		<div id="console"></div>
		<div id="highlightCodeID"></div>
	</div>
	<script type="text/javascript" src="../js/js-console.js"></script>
	<!-- START TASK CODE	 -->
	<script id="taskJavaScriptCode" type="text/javascript">
var domModule = (function (){
    var frag = document.createDocumentFragment();
    var bufferOfElements = 0;

    function appendChild(element, selector){
        var el = document.querySelector(selector);
        var node = document.createElement(element);
        node.className = 'testStyle';
        node.innerText = 'Div';
        jsConsole.writeLine("Was added div element to "+ selector);
        el.appendChild(node);
    }

    function removeChild(parrentSelector, removeElement){
    	 var parrentEl = document.querySelector(parrentSelector+' > '+removeElement);
        if(parrentEl != null){
            parrentEl.remove();
            jsConsole.writeLine("Element was removed");
        }
    }

    function addHandler(selector, event, eventFunction){
        var elements = document.querySelectorAll(selector);
        for(i = 0; i < elements.length; i++) {
            elements[i].addEventListener(event, eventFunction);
        }
    }

    function appendToBuffer(selector, element){
        var count = 35;
        var elem = element || document.createElement('div');
        for (var i = bufferOfElements; i < count + bufferOfElements; i++) {
            var currentElem = elem.cloneNode(true);
            currentElem.className = 'testMinStyle';
            currentElem.innerHTML = 'B';
            frag.appendChild(currentElem);
        }
        var parrentEl = document.querySelector(selector);
        bufferOfElements += count;
        if(bufferOfElements > 100){
            parrentEl.appendChild(frag);
            jsConsole.writeLine("Elements reach max buffer and add to DOM. ");
            bufferOfElements = 0;
        }else{
            jsConsole.writeLine(count+" Elements was added to buffer. Buffer is: "+ bufferOfElements);
        }
    }

    return {
        appendChild: appendChild,
        removeChild: removeChild,
        addHandler: addHandler,
        appendToBuffer: appendToBuffer,
        getElement: function (selector) {
            return document.querySelector(selector);
        },
        getElements: function (selector) {
            return document.querySelectorAll(selector);
        }
    };
})();

function addElementToParrent() {
    domModule.appendChild('div','#wrapper');
}

function removeElementFromParrent(){
    domModule.removeChild('#wrapper','div:first-child');
}

function startHandler(){
    domModule.addHandler('#wrapper > div','click',function(){
        this.style.backgroundColor = 'red';
        this.style.cursor = 'pointer';
        alert("Clicked");
    });
}

function  startBuferingElementByTen(){
    domModule.appendToBuffer('#wrapper');
}

function getElementsBySelector(){
	var el = domModule.getElement('#wrapper');
	jsConsole.writeLine(el.innerHTML);
}
</script>
	<!-- END TASK CODE	 -->
	
	<script type="text/javascript" src="../js/move-script-to-highlight.js"></script>
</body>
</html>